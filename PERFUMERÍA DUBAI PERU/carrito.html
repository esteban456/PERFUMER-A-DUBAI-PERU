

<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Carrito - PERFUMERÍA DUBAI PERU</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ====== ESTILOS ====== */
:root{
  --black:#0b0b0b;
  --gold:#C7A008;
  --gold-soft:#f2d78c;
  --ivory:#F8F5EF;
  --muted:#bfb7a6;
  --max:1100px;
  --radius:12px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,Arial,sans-serif;background:#0b0b0b;color:var(--ivory);min-height:100vh}

.header{background:var(--black);position:sticky;top:0;z-index:60;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
.header .inner{max-width:var(--max);margin:0 auto;padding:14px 18px;display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:48px;height:48px;border-radius:10px;overflow:hidden;background:linear-gradient(135deg,var(--gold),#f4d96b);border:2px solid rgba(199,160,8,0.12)}
.logo img{width:100%;height:100%;object-fit:cover}
.brand h1{font-family:Cinzel,serif;color:var(--ivory);font-size:18px;letter-spacing:1px;margin:0}

.container{max-width:var(--max);margin:26px auto;padding:20px}

.panel{
  background:#111;
  border-radius:14px;
  padding:18px;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
  border:1px solid rgba(199,160,8,0.06)
}

.cart-table{width:100%;border-collapse:collapse;color:var(--ivory)}
.cart-table th,.cart-table td{padding:14px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.04)}
.cart-table th{color:var(--muted);font-size:13px;text-transform:uppercase;letter-spacing:1px}

.product-name{display:flex;gap:12px;align-items:center}
.product-thumb{width:68px;height:68px;border-radius:8px;overflow:hidden}
.product-thumb img{width:100%;height:100%;object-fit:cover}

.qty-input{width:64px;padding:6px;border-radius:8px;background:#1a1a1a;color:var(--ivory);border:1px solid rgba(255,255,255,0.05)}

.total-box{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:10px;background:#000;border:1px solid rgba(199,160,8,0.08)}
.label{color:var(--muted)}
.value{font-weight:800;color:var(--gold);font-size:18px}

/* Botones */
.btn-yape{
  background:#8e33ff;
  color:white;
  padding:12px 18px;
  border-radius:10px;
  border:none;
  font-weight:800;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
  font-family:Cinzel;
  font-size:17px;
}

#deleteSelected{
  background:#1e90ff;
  color:white;
  padding:12px 18px;
  border-radius:10px;
  border:none;
  font-weight:800;
  cursor:pointer;
  font-family:Cinzel;
  font-size:17px;
}

/* Pantalla Yape */
#pantallaYape{
  position:fixed;
  inset:0;
  background:#742284;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:999999;
  padding:20px;
}

#cerrarYape{
  margin-top:25px;
  padding:12px;
  border:none;
  border-radius:50%;
  background:white;
  cursor:pointer;
  box-shadow:0 4px 20px rgba(0,0,0,0.3);
  display:flex;
  justify-content:center;
  align-items:center;
}
#cerrarYape img{width:28px;height:28px}

@media(max-width:900px){
  .cart-table th:nth-child(1), .cart-table td:nth-child(1){display:none}
}
</style>
</head>

<body>

<header class="header">
  <div class="inner">
    <div class="brand">
      <div class="logo"><img src="logo.png" alt="logo"></div>
      <h1>PERFUMERÍA DUBAI PERU</h1>
    </div>
    <nav>
      <a href="index.html">
        <img src="https://cdn-icons-png.flaticon.com/128/9121/9121722.png" width="30">
      </a>
    </nav>
  </div>
</header>

<main class="container">
  <div class="panel">
    <h2 style="margin-bottom:14px;font-family:Cinzel;color:var(--gold)">Tu carrito</h2>

    <table class="cart-table" id="cartTable">
      <thead>
        <tr>
          <th></th>
          <th>Producto</th>
          <th>Precio</th>
          <th>Cantidad</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody id="cartBody"></tbody>
    </table>

    <div style="display:flex;flex-direction:column;gap:12px;margin-top:18px">

      <div style="display:flex;justify-content:flex-end;gap:14px;align-items:center;flex-wrap:wrap">
        <div class="total-box" style="min-width:260px">
          <div class="label">Total seleccionado:</div>
          <div class="value" id="totalText">S/0</div>
        </div>

        <button id="deleteSelected">Borrar seleccionados</button>

        <button id="yapeBtn" class="btn-yape">
          Pague aquí
          <img src="logoyape.webp" style="width:22px;height:22px">
        </button>
      </div>

    </div>
  </div>
</main>

<div id="pantallaYape">
  <img src="qryape.png" width="280">

  <button id="cerrarYape">
    <img src="https://cdn-icons-png.flaticon.com/128/9121/9121722.png">
  </button>
</div>

<script>
/* ====== PAGO SIN SESIÓN (DESBLOQUEADO) ====== */
document.getElementById("yapeBtn").onclick = () => {
  document.getElementById("pantallaYape").style.display = "flex";
};

document.getElementById("cerrarYape").onclick = () => {
  document.getElementById("pantallaYape").style.display = "none";
};

/* ====== CARRITO ====== */
function getCart() {
  const raw = localStorage.getItem("cart");
  return raw ? JSON.parse(raw) : [];
}

function saveCart(cart) {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function renderCart() {
  const cartBody = document.getElementById("cartBody");
  const cart = getCart();
  cartBody.innerHTML = '';
  let total = 0;

  cart.forEach((p, index) => {
    const subtotal = p.price * p.qty;
    total += subtotal;

    const row = document.createElement('tr');
    row.innerHTML = `
      <td><input type="checkbox" class="select-product" data-index="${index}" style="accent-color:#1e90ff"></td>
      <td class="product-name">
        <div class="product-thumb"><img src="${p.image}" /></div>
        ${p.name}
      </td>
      <td>S/${p.price}</td>
      <td><input type="number" class="qty-input" value="${p.qty}" min="1" data-index="${index}"></td>
      <td>S/${subtotal}</td>
    `;
    cartBody.appendChild(row);
  });

  document.getElementById("totalText").innerText = `S/${total}`;
}

document.getElementById("deleteSelected").onclick = () => {
  let cart = getCart();
  const checkboxes = document.querySelectorAll(".select-product");
  checkboxes.forEach(cb => {
    if(cb.checked){
      const index = parseInt(cb.dataset.index);
      cart[index] = null;
    }
  });
  cart = cart.filter(p => p !== null);
  saveCart(cart);
  renderCart();
};

document.addEventListener('input', e => {
  if(e.target.classList.contains('qty-input')){
    const cart = getCart();
    const index = parseInt(e.target.dataset.index);
    cart[index].qty = parseInt(e.target.value) || 1;
    saveCart(cart);
    renderCart();
  }
});

renderCart();
</script>

</body>
</html>

